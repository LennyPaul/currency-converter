<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>JS asynchrone</title>
  </head>
  <body>
    <script>
      let baguetteStock = 11;
      const buyBread = (n, cb) => {
        console.log("Je vais achter du pain");
        setTimeout(() => {
          if (n > baguetteStock) {
            cb(
              new Error(
                `Le boulanger n'as plus assez de pain, il ne lui reste que ${baguetteStock}`
              )
            );
          } else {
            cb(null, `J'ai achter ${n} baguette${n > 1 ? "s" : ""}`);
          }
        }, 1000);
      };

      buyBread(2, (error, message) => {
        if (error) {
          return console.error(error);
        }
        console.log(message);
      });
      console.log("Je Fais la queue a la boulangerie");
      setTimeout(() => console.log("Je rentre chez moi"), 2000);
    </script>
  </body>
</html>
